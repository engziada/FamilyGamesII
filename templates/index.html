{% extends "base.html" %}
{% block content %}
<div class="container">
    <header>
        <h1>ุฃููุงู ุจูู ูู ุฃูุนุงุจ ุงูุนููุฉ!</h1>
        <p>ุงุณุชูุชุน ุจุฃุฌูู ุงูุฃูุนุงุจ ูุน ุงูุนุงุฆูุฉ ูุงูุฃุตุฏูุงุก ูู ููุงู ูุงุญุฏ</p>
    </header>

    <div class="games-grid">
        <!-- Charades Card -->
        <div class="card game-card animate-bounce-down">
            <div class="game-icon">
                <i class="fas fa-mask"></i>
            </div>
            <h3>ุจุฏูู ููุงู</h3>
            <p>ูู ุจุชูุซูู ุงููููุฉ ุจุฏูู ุงุณุชุฎุฏุงู ุงูููุงู ูุฎูู ุตุญุงุจู ูุฎูููุง! ุงููุนุจุฉ ุงูุฃุดูุฑ ูู ูู ุชุฌูุนุงุชูุง.</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 ูุงุนุจูู</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('charades', 'create')">
                    <i class="fas fa-plus"></i> ูุนุจุฉ ุฌุฏูุฏุฉ
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('charades', 'join')">
                    <i class="fas fa-sign-in-alt"></i> ุงูุถูุงู
                </button>
            </div>
            <button class="btn-help" onclick="Utils.showRules('charades')" title="ููู ุชูุนุจุ">
                <i class="fas fa-question-circle"></i> ููู ุชูุนุจุ
            </button>
        </div>

        <!-- Pictionary Card -->
        <div class="card game-card animate-bounce-down">
            <div class="game-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <h3>ุงุฑุณู ูุฎูู</h3>
            <p>ูุนุจุฉ ุงูุฑุณู ูุงูุฐูุงุก. ุงุฑุณู ุงููููุฉ ูุญุงูู ุชุฎูู ุตุญุงุจู ูุนุฑูููุง ูู ุฃุณุฑุน ููุช!</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 ูุงุนุจูู</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('pictionary', 'create')">
                    <i class="fas fa-plus"></i> ูุนุจุฉ ุฌุฏูุฏุฉ
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('pictionary', 'join')">
                    <i class="fas fa-sign-in-alt"></i> ุงูุถูุงู
                </button>
            </div>
            <button class="btn-help" onclick="Utils.showRules('pictionary')" title="ููู ุชูุนุจุ">
                <i class="fas fa-question-circle"></i> ููู ุชูุนุจุ
            </button>
        </div>

        <!-- Trivia Card -->
        <div class="card game-card animate-bounce-down">
            <div class="game-icon">
                <i class="fas fa-lightbulb"></i>
            </div>
            <h3>ุจูู ุงููุนูููุงุช</h3>
            <p>ุงุฎุชุจุฑ ูุนูููุงุชู ุงูุนุงูุฉ ูุน ุฃููู ูุฃุตุญุงุจู ูู ูุณุงุจูุฉ ุซูุงููุฉ ููุชุนุฉ. ุฃุณุฆูุฉ ูู ูู ุงููุฌุงูุงุช!</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 ูุงุนุจูู</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('trivia', 'create')">
                    <i class="fas fa-plus"></i> ูุนุจุฉ ุฌุฏูุฏุฉ
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('trivia', 'join')">
                    <i class="fas fa-sign-in-alt"></i> ุงูุถูุงู
                </button>
            </div>
            <button class="btn-help" onclick="Utils.showRules('trivia')" title="ููู ุชูุนุจุ">
                <i class="fas fa-question-circle"></i> ููู ุชูุนุจุ
            </button>
        </div>
    </div>
</div>

<!-- Create Game Modal -->
<div id="create-game-modal" class="modal">
    <input type="hidden" id="modal-game-type" value="charades">
    <div class="modal-content animate-bounce-down">
        <h2 id="modal-title">ุฅูุดุงุก ุบุฑูุฉ ุฌุฏูุฏุฉ</h2>
        <div id="create-error-message" class="error-message badge badge-team-1 u-hidden u-full-width u-margin-bottom"></div>
        <div class="input-group">
            <label for="host-name">ุงุณูู</label>
            <input type="text" id="host-name" placeholder="ุงูุชุจ ุงุณูู ููุง...">
        </div>
        <div class="input-group">
            <label>ุงุฎุชุฑ ุดุฎุตูุชู</label>
            <div id="host-avatar-picker" class="avatar-picker">
                <!-- Avatars populated by JS -->
            </div>
            <input type="hidden" id="host-avatar" value="๐ถ">
        </div>
        <div class="input-group">
            <label>ูุธุงู ุงููุนุจ</label>
            <select id="game-teams" class="input-control">
                <option value="false">ูุฑุฏู (ูู ูุงุญุฏ ูููุณู)</option>
                <option value="true">ูุฑู (ูุฑูููู ุถุฏ ุจุนุถ)</option>
            </select>
        </div>
        <div class="input-group">
            <label>ููุช ุงูุฌููุฉ (ุงูุตุนูุจุฉ)</label>
            <select id="game-difficulty" class="input-control">
                <option value="easy">ุณูู (120 ุซุงููุฉ)</option>
                <option value="medium">ูุชูุณุท (90 ุซุงููุฉ)</option>
                <option value="hard">ุตุนุจ (60 ุซุงููุฉ)</option>
            </select>
        </div>
        <div id="room-info" class="card u-hidden u-full-width u-margin-bottom" style="padding: 1.5rem;">
            <div style="display: flex; gap: 2rem; align-items: center; justify-content: center; flex-wrap: wrap;">
                <div id="qrcode" style="background: white; padding: 10px; border-radius: 10px; border: 2px solid var(--text);"></div>
                <div style="text-align: right;">
                    <p>ุฑูู ุงูุบุฑูุฉ: <span id="room-id" style="font-weight: 800; color: var(--primary); font-size: 1.5rem;"></span></p>
                    <p style="font-size: 0.9rem; color: var(--text-light);">ุดุงุฑู ูุฐุง ุงูุฑูู ูุน ุฃุตุฏูุงุฆู ููุฅูุถูุงู ุฃู ุฎูููู ูุตูุฑูุง ุงูููุฏ!</p>
                    <button class="btn btn-outline" onclick="Utils.copyJoinLink()" style="padding: 0.5rem 1rem; font-size: 0.8rem; margin-top: 10px;">
                        <i class="fas fa-link"></i> ูุณุฎ ุฑุงุจุท ุงูุงูุถูุงู
                    </button>
                </div>
            </div>
        </div>
        <div class="players-list u-hidden u-full-width">
            <h4>ุงููุงุนุจูู ูู ุงูุบุฑูุฉ:</h4>
            <ul id="host-players-list"></ul>
        </div>
        <div class="buttons u-flex-center u-full-width">
            <button class="btn btn-primary" style="flex: 2;" onclick="Lobby.createGame()">ุฃูุดุฆ ุงูุบุฑูุฉ</button>
            <button class="btn btn-outline" style="flex: 1;" onclick="Utils.hideModal('create-game-modal')">ุฅูุบุงุก</button>
        </div>
    </div>
</div>

<!-- Rules Modal -->
<div id="rules-modal" class="modal">
    <div class="modal-content animate-bounce-down" style="max-width: 600px;">
        <h2 id="rules-title">ููู ุชูุนุจุ</h2>
        <div id="rules-content" class="u-text-right u-full-width" style="text-align: right; max-height: 60vh; overflow-y: auto; padding: 1rem; background: var(--bg-main); border-radius: 15px;">
            <!-- Rules populated by JS -->
        </div>
        <div class="buttons u-flex-center u-full-width">
            <button class="btn btn-primary" style="width: 100%;" onclick="Utils.hideModal('rules-modal')">ูููุช!</button>
        </div>
    </div>
</div>

<!-- Join Game Modal -->
<div id="join-game-modal" class="modal">
    <div class="modal-content animate-bounce-down">
        <div id="join-form" class="u-full-width">
            <h2 class="u-margin-bottom">ุงูุถูุงู ููุนุจุฉ</h2>
            <div id="join-error-message" class="error-message badge badge-team-1 u-hidden u-full-width u-margin-bottom"></div>
            <div class="input-group">
                <label for="player-name">ุงุณูู</label>
                <input type="text" id="player-name" placeholder="ุงูุชุจ ุงุณูู...">
            </div>
            <div class="input-group">
                <label>ุงุฎุชุฑ ุดุฎุตูุชู</label>
                <div id="join-avatar-picker" class="avatar-picker">
                    <!-- Avatars populated by JS -->
                </div>
                <input type="hidden" id="join-avatar" value="๐ถ">
            </div>
            <div class="input-group">
                <label for="room-code">ุฑูู ุงูุบุฑูุฉ</label>
                <input type="text" id="room-code" placeholder="ุงูุชุจ ุฑูู ุงูุบุฑูุฉ...">
            </div>
            <div class="buttons u-flex-center u-full-width">
                <button class="btn btn-primary" style="flex: 2;" onclick="Lobby.joinGame()">ุงูุถู ุงูุขู</button>
                <button class="btn btn-outline" style="flex: 1;" onclick="Utils.hideModal('join-game-modal')">ุฅูุบุงุก</button>
            </div>
        </div>
        <div id="join-lobby" class="u-hidden u-full-width">
            <h2 class="u-margin-bottom">ูู ุงูุชุธุงุฑ ุงูุจุฏุงูุฉ</h2>
            <p class="u-margin-bottom" style="color: var(--primary); font-weight: 700; font-size: 1.2rem;">ุฑูู ุงูุบุฑูุฉ: <span id="join-room-id"></span>
                <button class="btn-copy" onclick="Utils.copyToClipboard('join-room-id')" title="ูุณุฎ ุฑูู ุงูุบุฑูุฉ">
                    <i class="fas fa-copy"></i>
                </button>
            </p>
            <div class="players-list u-full-width u-margin-bottom">
                <h4>ุงููุงุนุจูู ุงูููุฌูุฏูู:</h4>
                <ul id="join-players-list"></ul>
            </div>
            <p class="animate-heartbeat" style="color: var(--secondary); font-weight: 800; font-size: 1.1rem;">
                ูู ุงูุชุธุงุฑ ุงููุถูู ูุจุฏุก ุงููุนุจุฉ...
            </p>
            <div class="buttons u-full-width u-margin-top" style="display: flex; gap: 10px;">
                <button class="btn btn-outline" style="flex: 1;" onclick="Lobby.leaveGame()">ุฎุฑูุฌ</button>
            </div>
        </div>
    </div>
</div>

<div id="error-message"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/charades.js') }}"></script>
{% endblock %}
