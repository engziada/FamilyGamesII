{% extends "base.html" %}
{% block content %}
<div class="container">
    <header>
        <h1>أهلاً بكم في ألعاب العيلة!</h1>
        <p>استمتع بأجمل الألعاب مع العائلة والأصدقاء في مكان واحد</p>
    </header>

    <div class="games-grid">
        <!-- Charades Card -->
        <div class="card game-card animate__animated animate__fadeInUp">
            <div class="game-icon">
                <i class="fas fa-mask"></i>
            </div>
            <h3>بدون كلام</h3>
            <p>قم بتمثيل الكلمة بدون استخدام الكلام وخلي صحابك يخمنوا! اللعبة الأشهر في كل تجمعاتنا.</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 لاعبين</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('charades', 'create')">
                    <i class="fas fa-plus"></i> لعبة جديدة
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('charades', 'join')">
                    <i class="fas fa-sign-in-alt"></i> انضمام
                </button>
            </div>
        </div>

        <!-- Pictionary Card -->
        <div class="card game-card animate__animated animate__fadeInUp">
            <div class="game-icon">
                <i class="fas fa-paint-brush"></i>
            </div>
            <h3>ارسم وخمن</h3>
            <p>لعبة الرسم والذكاء. ارسم الكلمة وحاول تخلي صحابك يعرفوها في أسرع وقت!</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 لاعبين</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('pictionary', 'create')">
                    <i class="fas fa-plus"></i> لعبة جديدة
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('pictionary', 'join')">
                    <i class="fas fa-sign-in-alt"></i> انضمام
                </button>
            </div>
        </div>

        <!-- Trivia Card -->
        <div class="card game-card animate__animated animate__fadeInUp">
            <div class="game-icon">
                <i class="fas fa-lightbulb"></i>
            </div>
            <h3>بنك المعلومات</h3>
            <p>اختبر معلوماتك العامة مع أهلك وأصحابك في مسابقة ثقافية ممتعة. أسئلة في كل المجالات!</p>
            <div class="game-meta">
                <span><i class="fas fa-users"></i> 2 - 8 لاعبين</span>
            </div>
            <div class="buttons">
                <button class="btn btn-primary" onclick="Utils.showGameModal('trivia', 'create')">
                    <i class="fas fa-plus"></i> لعبة جديدة
                </button>
                <button class="btn btn-outline" onclick="Utils.showGameModal('trivia', 'join')">
                    <i class="fas fa-sign-in-alt"></i> انضمام
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Create Game Modal -->
<div id="create-game-modal" class="modal">
    <input type="hidden" id="modal-game-type" value="charades">
    <div class="modal-content animate-bounce-down">
        <h2 id="modal-title">إنشاء غرفة جديدة</h2>
        <div id="create-error-message" class="error-message badge badge-team-1" style="display: none; width: 100%; margin-bottom: 1rem;"></div>
        <div class="input-group">
            <label for="host-name">اسمك</label>
            <input type="text" id="host-name" placeholder="اكتب اسمك هنا...">
        </div>
        <div class="input-group">
            <label>نظام اللعب</label>
            <select id="game-teams" class="input-control">
                <option value="false">فردي (كل واحد لنفسه)</option>
                <option value="true">فرق (فريقين ضد بعض)</option>
            </select>
        </div>
        <div class="input-group">
            <label>وقت الجولة (الصعوبة)</label>
            <select id="game-difficulty" class="input-control">
                <option value="easy">سهل (120 ثانية)</option>
                <option value="medium">متوسط (90 ثانية)</option>
                <option value="hard">صعب (60 ثانية)</option>
            </select>
        </div>
        <div id="room-info" class="card" style="display: none; width: 100%; padding: 1.5rem; margin-bottom: 1rem;">
            <p>رقم الغرفة: <span id="room-id" style="font-weight: 800; color: var(--primary); font-size: 1.5rem;"></span></p>
            <p style="font-size: 0.9rem; color: var(--text-light);">شارك هذا الرقم مع أصدقائك للإنضمام</p>
        </div>
        <div class="players-list" style="display: none; width: 100%;">
            <h4>اللاعبين في الغرفة:</h4>
            <ul id="host-players-list"></ul>
        </div>
        <div class="buttons" style="display: flex; gap: 1rem; width: 100%;">
            <button class="btn btn-primary" style="flex: 2;" onclick="Lobby.createGame()">أنشئ الغرفة</button>
            <button class="btn btn-outline" style="flex: 1;" onclick="Utils.hideModal('create-game-modal')">إلغاء</button>
        </div>
    </div>
</div>

<!-- Join Game Modal -->
<div id="join-game-modal" class="modal">
    <div class="modal-content animate-bounce-down">
        <div id="join-form" style="width: 100%;">
            <h2 style="margin-bottom: 1.5rem;">انضمام للعبة</h2>
            <div id="join-error-message" class="error-message badge badge-team-1" style="display: none; width: 100%; margin-bottom: 1rem;"></div>
            <div class="input-group">
                <label for="player-name">اسمك</label>
                <input type="text" id="player-name" placeholder="اكتب اسمك...">
            </div>
            <div class="input-group">
                <label for="room-code">رقم الغرفة</label>
                <input type="text" id="room-code" placeholder="اكتب رقم الغرفة...">
            </div>
            <div class="buttons" style="display: flex; gap: 1rem; width: 100%;">
                <button class="btn btn-primary" style="flex: 2;" onclick="Lobby.joinGame()">انضم الآن</button>
                <button class="btn btn-outline" style="flex: 1;" onclick="Utils.hideModal('join-game-modal')">إلغاء</button>
            </div>
        </div>
        <div id="join-lobby" style="display: none; width: 100%;">
            <h2 style="margin-bottom: 1.5rem;">في انتظار البداية</h2>
            <p style="margin-bottom: 1rem; color: var(--primary); font-weight: 700; font-size: 1.2rem;">رقم الغرفة: <span id="join-room-id"></span></p>
            <div class="players-list" style="margin-bottom: 1.5rem; width: 100%;">
                <h4>اللاعبين الموجودين:</h4>
                <ul id="join-players-list"></ul>
            </div>
            <p class="animate-heartbeat" style="color: var(--secondary); font-weight: 800; font-size: 1.1rem;">
                في انتظار المضيف لبدء اللعبة...
            </p>
            <div class="buttons" style="margin-top: 1.5rem; width: 100%;">
                <button class="btn btn-outline" onclick="Lobby.leaveGame()">خروج</button>
            </div>
        </div>
    </div>
</div>

<div id="error-message"></div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/charades.js') }}"></script>
{% endblock %}
